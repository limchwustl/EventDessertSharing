{"ast":null,"code":"var _jsxFileName = \"/Users/chaehunlim/Documents/React Project/instagram_desserts/src/routes/Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport Place from \"../components/Place\";\nimport \"./Home.css\";\nimport Filter from \"../components/Filter\";\nimport { db } from \"../firebase/firebase-config\";\nimport { collection, getDocs, query, where } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Home = _ref => {\n  _s();\n\n  let {\n    places,\n    setPlaces\n  } = _ref;\n  const [curPlaces, setCurPlaces] = useState(places);\n  const [filter, setFilter] = useState([-1, -1]);\n  const isMounted = useRef(false);\n  const [switchBetweenListAndTableView, setSwitchBetweenListAndTableView] = useState(false);\n\n  const switchViewOfResults = () => {\n    setSwitchBetweenListAndTableView(switchBetweenListAndTableView => !switchBetweenListAndTableView);\n  };\n\n  useEffect(() => {\n    const filterEnum = {\n      0: \"type\",\n      1: \"region\"\n    };\n\n    if (isMounted.current) {\n      const queryDataWithFilter = filter => {\n        const getPlaces = async () => {\n          const placesCollectionsRef = collection(db, \"places\");\n\n          if (placesCollectionsRef) {\n            let q = query(placesCollectionsRef);\n\n            for (let i in filter) {\n              if (filter[i] !== -1) {\n                q = query(placesCollectionsRef, where(filterEnum[i], \"==\", filter[i]));\n              }\n            }\n\n            const querySnapshot = await getDocs(q);\n            const parsedData = querySnapshot.docs.map(doc => ({ ...doc.data(),\n              id: doc.id,\n              key: doc.id\n            }));\n            setCurPlaces(places => parsedData);\n          }\n        };\n\n        getPlaces();\n      };\n\n      queryDataWithFilter(filter);\n      return;\n    }\n\n    isMounted.current = true;\n  }, [filter]);\n  useEffect(() => {\n    localStorage.setItem(\"isTableView\", !localStorage.getItem(\"isTableView\"));\n  }, [switchBetweenListAndTableView]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-container\",\n      children: /*#__PURE__*/_jsxDEV(Filter, {\n        setFilter: setFilter,\n        setCurPlaces: setCurPlaces,\n        places: places,\n        children: \"filter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: switchViewOfResults,\n      children: [\" \", \"click here to switch to list view\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: switchBetweenListAndTableView ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"result-container-table\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"table-ul\",\n          children: curPlaces.map(place => /*#__PURE__*/_jsxDEV(\"li\", {}, place.key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"result-container-list\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: curPlaces.map(place => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(Place, {\n              id: place.id,\n              name: place.name,\n              image: place.image\n            }, place.key, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 19\n            }, this)\n          }, place.key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Home, \"GC+FMMFyFyRgfh5aJct+G48YfaI=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Place","Filter","db","collection","getDocs","query","where","Home","places","setPlaces","curPlaces","setCurPlaces","filter","setFilter","isMounted","switchBetweenListAndTableView","setSwitchBetweenListAndTableView","switchViewOfResults","filterEnum","current","queryDataWithFilter","getPlaces","placesCollectionsRef","q","i","querySnapshot","parsedData","docs","map","doc","data","id","key","localStorage","setItem","getItem","place","name","image"],"sources":["/Users/chaehunlim/Documents/React Project/instagram_desserts/src/routes/Home.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport Place from \"../components/Place\";\nimport \"./Home.css\";\nimport Filter from \"../components/Filter\";\nimport { db } from \"../firebase/firebase-config\";\nimport { collection, getDocs, query, where } from \"firebase/firestore\";\n\nconst Home = ({ places, setPlaces }) => {\n  const [curPlaces, setCurPlaces] = useState(places);\n  const [filter, setFilter] = useState([-1, -1]);\n\n  const isMounted = useRef(false);\n  const [switchBetweenListAndTableView, setSwitchBetweenListAndTableView] =\n    useState(false);\n\n  const switchViewOfResults = () => {\n    setSwitchBetweenListAndTableView(\n      (switchBetweenListAndTableView) => !switchBetweenListAndTableView\n    );\n  };\n\n  useEffect(() => {\n    const filterEnum = {\n      0: \"type\",\n      1: \"region\",\n    };\n    if (isMounted.current) {\n      const queryDataWithFilter = (filter) => {\n        const getPlaces = async () => {\n          const placesCollectionsRef = collection(db, \"places\");\n          if (placesCollectionsRef) {\n            let q = query(placesCollectionsRef);\n            for (let i in filter) {\n              if (filter[i] !== -1) {\n                q = query(\n                  placesCollectionsRef,\n                  where(filterEnum[i], \"==\", filter[i])\n                );\n              }\n            }\n\n            const querySnapshot = await getDocs(q);\n\n            const parsedData = querySnapshot.docs.map((doc) => ({\n              ...doc.data(),\n              id: doc.id,\n              key: doc.id,\n            }));\n            setCurPlaces((places) => parsedData);\n          }\n        };\n        getPlaces();\n      };\n\n      queryDataWithFilter(filter);\n\n      return;\n    }\n    isMounted.current = true;\n  }, [filter]);\n\n  useEffect(() => {\n    localStorage.setItem(\"isTableView\", !localStorage.getItem(\"isTableView\"));\n  }, [switchBetweenListAndTableView]);\n\n  return (\n    <div className=\"home-container\">\n      <div className=\"filter-container\">\n        <Filter\n          setFilter={setFilter}\n          setCurPlaces={setCurPlaces}\n          places={places}\n        >\n          filter\n        </Filter>\n      </div>\n      <button onClick={switchViewOfResults}>\n        {\" \"}\n        click here to switch to list view\n      </button>\n      <div>\n        {switchBetweenListAndTableView ? (\n          <div className=\"result-container-table\">\n            <ul className=\"table-ul\">\n              {curPlaces.map((place) => (\n                <li key={place.key}>\n                 \n                </li>\n              ))}\n            </ul>\n          </div>\n        ) : (\n          <div className=\"result-container-list\">\n            <ul>\n              {curPlaces.map((place) => (\n                <li key={place.key}>\n                  <Place\n                    key={place.key}\n                    id={place.id}\n                    name={place.name}\n                    image={place.image}\n                  />\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n      </div>\n\n      <ul></ul>\n    </div>\n  );\n};\n\nexport default Home;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}